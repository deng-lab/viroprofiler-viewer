
## Introduction

ViroProfiler-Viewer is a Shiny APP built for visuaslizing output of the
<a href="https://github.com/deng-lab/viroprofiler" target="_blank">ViroProfiler
pipeline</a>. In order to use the APP, please upload the
`viroprofiler_output.RData` file generated by the ViroProfiler pipeline.

## How to run

Due to the computation resource limitation of the cloud service, it is
highly recommened to run ViroProfiler-Viewer on your local computer. You
could use one of following three approaches,

### Using Docker image

``` sh
docker run --rm denglab/viroprofiler-viewer
```

### Run from GitHub

``` sh
R -e "shiny::runGitHub('viroprofiler-viewer', 'deng-lab')"
```

### Run from local

``` sh
git clone https://github.com/deng-lab/viroprofiler-viewer
R -e "shiny::runApp('viroprofiler-viewer')"
```

## Generate refined abundance table

<a href="https://github.com/wwood/CoverM" target="_blank">CoverM</a> has
many methods to calculate coverage and abundance. By default,
ViroProfiler generated three metrics:

1.  `count`: number of reads mapped to a contig.
2.  `trimmed_mean`: mean coverage of all remaining positions after
    removing the 5% of bases with highest coverage and 5% of bases with
    lowest coverage.
3.  `covered_fraction`: fraction of contigs covered by at least on base
    from reads.

Due to similarity of some region between phages, reads might mapped to
wrong contigs. Therefore, we would set the abundance value to zero if
`covered_fraction` of a contig is below a threshold. For example,
threshold = 0.5 means that abundance of contigs with
`covered_fraction < 50%` of its length will be set to zero. The
threshold can be easily changed using the `sliderinput` in the side
panel. The abundance table will change according to the modified
threshold. Users can then download the refined abundance table for
further analysis.
